# Queries

The following snippets are examples of data that should be generated by the application and fed to the template engine. This data must be generated because the template engine contains no (or very very little) logic. For example, it cannot turn a UNIX timestamp into a formatted date (easily). Nor can it calculate course/category averages.

## Pages

The following is used to list the pages available to the user in the sidebar or pull-out drawer.

```json
[
	{
		"name": "Dashboard",
		"route": "dashboard",
		"icon": "icon-stats-bars"
	},
	{
		"name": "Year at a Glance",
		"route": "fullyear",
		"icon": "icon-grid"
	}
]
```

## Students

The following is the data used to create the student switch dropdown. Note that the currently selected student is not listed here.

```json
[
	{
		"id": "313337",
		"name": "Eli Vance",
		"color": "silver"
	},
	{
		"id": "011235",
		"name": "Alyx Vance",
		"color": "amethyst"
	}
]
```

## Detail View

The following is a JSON object for rendering the details of a single cycle for one class. Note that the weight values should be given as numeric percentages.

```json
{
	"courseTitle": "Combinatorics & Graph Theory",
	"coursePeriod": 1,
	"teacherName": "Blaise Pascal",
	"teacherEmail": "bpascal@oxford.edu",
	"cycleAverage": 98,
	"courseGoal": 100,
	"cycleIndex": 1,
	"lastUpdated": "42 minutes ago",
	"categories": [
		{
			"title": "Homework",
			"weight": 10,
			"average": 100,
			"assignments": [
				{
					"title": "Factorials",
					"dateDue": "Sep 4",
					"dateAssigned": "Aug 28",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Permutations",
					"dateDue": "Sep 11",
					"dateAssigned": "Sep 4",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinations",
					"dateDue": "Sep 18",
					"dateAssigned": "Sep 11",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinatorics and Probability",
					"dateDue": "Sep 25",
					"dateAssigned": "Sep 18",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Review",
					"dateDue": "Oct 2",
					"dateAssigned": "Sep 25",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		},
		{
			"title": "Quizzes",
			"weight": 30,
			"average": 95,
			"assignments": [
				{
					"title": "Factorials",
					"dateDue": "Sep 4",
					"dateAssigned": "Sep 4",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Permutations",
					"dateDue": "Sep 11",
					"dateAssigned": "Sep 11",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinations",
					"dateDue": "Sep 18",
					"dateAssigned": "Sep 18",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinatorics and Probability",
					"dateDue": "Sep 25",
					"dateAssigned": "Sep 25",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		},
		{
			"title": "Tests",
			"weight": 60,
			"average": 98,
			"assignments": [
				{
					"title": "Combinatorics Test",
					"dateDue": "Oct 9",
					"dateAssigned": "Oct 9",
					"ptsEarned": 98,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		}
	]
}
```

## Courses

For the sidebar in detail view. This only contains the courses for the currently selected cycle.

```json
[
	{
		"title": "Combinatorics & Graph Theory",
		"period": 1,
		"average": 98
	},
	{
		"title": "Statistics",
		"period": 2,
		"average": 95
	},
	{
		"title": "Software Development",
		"period": 3,
		"average": 96
	},
	{
		"title": "English",
		"period": 4,
		"average": 88
	},
	{
		"title": "Circuits",
		"period": 5,
		"average": 90
	},
	{
		"title": "Physics",
		"period": 6,
		"average": 93
	},
	{
		"title": "Orchestra",
		"period": 7,
		"average": 100
	}
]
```

## Export

The following is an example JSON export. Arrays have been shortened to one item.

```json
{
	"name": "Alan Turing",
	"studentID": "101010",
	"idHash": "s3mx92s2m0=",
	"preferences": {

	},
	"gpaBlacklist": [
		
	],
	"courses": [
		{
			"title": "Combinatorics & Graph Theory",
			"period": 1,
			"teacherName": "Blaise Pascal",
			"teaacherEmail": "bpascal@oxford.edu",
			"sixWeeksAverages": [98, 95, 94, 96, 93, 90],
			"examGrades": [99, 100],
			"semesterAverages": [96, 94],
			"goal": 95,
			"cycles": [
				{
					"index": 1,
					"average": 98,
					"categories": [
						{
							"title": "Homework",
							"weight": 10,
							"average": 100,
							"assignments": [
								{
									"title": "Factorials",
									"dateDue": "Oct 26",
									"dateAssigned": "Oct 24",
									"ptsEarned": 100,
									"ptsPossible": 100,
									"weight": 1,
									"note": "",
									"extraCredit": false
								}
							]
						}
					]
				}
			]
		}
	]
}
```

## Preferences

The following is for the sidebar.

```json
{
	"categories": [
		{
			"name": "General",
			"route": "preferences/general",
			"icon": "icon-gear-a"
		},
		{
			"name": "Notifications",
			"route": "preferences/notifications",
			"icon": "icon-ios7-bell"
		},
		{
			"name": "Colorization",
			"route": "preferences/colorization",
			"icon": "icon-waterdrop"
		},
		{
			"name": "Students",
			"route": "preferences/students",
			"icon": "icon-person-stalker"
		},
		{
			"name": "Refresh",
			"route": "preferences/refresh",
			"icon": "icon-refresh"
		},
		{
			"name": "Security",
			"route": "preferences/security",
			"icon": "icon-locked"
		},
		{
			"name": "Experimental",
			"route": "preferences/experimental",
			"icon": "icon-beaker"
		},
		{
			"name": "About",
			"route": "preferences/about",
			"icon": "icon-information-circled"
		}
	]
}
```

The following is for a single view of the actual preference items for a particular category. I don't know yet how we will implement the interactive part of this, since the HTML elements will need to be bound to JavaScript functions on change. I'm hoping the web framework can handle this, which may mean the following could be irrelevant.

```json
[
	{
		"title": "Consolidate Updates",
		"caption": "Notify once for all grade changes, instead of once for each individual change. This is required if password lock is enabled.",
		"type": "toggle",
		"id": "notif_consolidate",
		"defaultValue": false
	},
	{
		"title": "Auto-Hide Duration",
		"caption": "Duration in seconds to display the notification. Set to 0 to disable auto-hide (manual notification dismissal).",
		"type": "number",
		"id": "notif_duration",
		"defaultValue": "5"
	}
]
```
